<!DOCTYPE html>
<html>
	<head>
		<title>File Picker</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="generator" content="Limnor Studio (http://www.limnor.com)" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Script-Type" content="text/javascript" />
		<style type="text/css">body {color:#000000;}</style>
		<script type="text/javascript" src="libJs/AppLimnorUserForum.js"></script>
		<script type="text/javascript" src="libJs/limnorStudio.js"></script>
		<script type="text/javascript" src="libJs/filebrowser.js"></script>
		<script type="text/javascript">
var limnorPage={};
document.pageId = 28310;

function setData(title,filetypes,disableUpload,subFolder,subName,maxSize)
{
	JsonDataBinding.SetInnerText(document.getElementById('lblTitle'),title);
	document.getElementById('btUpload').disabled=JsonDataBinding.isValueTrue(disableUpload);
	document.getElementById('HtmlFileUpload1').disabled=JsonDataBinding.isValueTrue(disableUpload);
	if(JsonDataBinding.isValueTrue((maxSize) > (0))) {
		document.getElementById('HtmlFileUpload1').jsData.SetMaxFileSize(maxSize);

	}
	var HtmlFileBrowser1 = document.getElementById('HtmlFileBrowser1');
HtmlFileBrowser1.jsData.restart(subFolder,subName,filetypes);
}

function setFileSelection(filepath)
{
	JsonDataBinding.PageValues.propSelectedFile=filepath;
	document.getElementById('txtFile').value=filepath;
}

function checkFileType()
{
	if('png;gif;jpg;bmp;swf;mp3;html;js'.toLowerCase().indexOf(HtmlFileUpload1f.HtmlFileUpload1.value.split('.').pop().toLowerCase()) >= 0) {
				return true;
	}
	else{
		alert('This type of file is not allowed');
				return false;
	}
}

window.onload=function() {

	JsonDataBinding.setServerPage('WebFilePicker.php');
	JsonDataBinding.setupChildManager();
		JsonDataBinding.PageValues.propSelectedFile = null;
		JsonDataBinding.PageValues.sizeOK = null;
	JsonDataBinding.ProcessPageParameters();
	JsonDataBinding.setSessionTimeout(60);
		JsonDataBinding.IFrame = ff989cbc2;

var HtmlFileBrowser1 = document.getElementById('HtmlFileBrowser1');
HtmlFileBrowser1.jsData=JsonDataBinding.CreateFileBrowser(HtmlFileBrowser1,'','','', true);

JsonDataBinding.setButtonImage(document.getElementById('btOK'),'/libjs/ok2_tr.png',14, 14);

JsonDataBinding.setButtonImage(document.getElementById('btCancel'),'/libjs/cancel_tr.png',16, 16);
	var btUpload=document.getElementById('btUpload');
	btUpload.onclick=function(event) {
	if(typeof sender === 'undefined' || sender == null) {
		var e = (typeof event !== 'undefined' && event != null)?event:(window.event || (document.parentWindow? document.parentWindow.event:null));
		var sender = JsonDataBinding.getSender(e);
	}
	JsonDataBinding.SetEventFirer(btUpload);
	JsonDataBinding.AbortEvent = false;
	if(JsonDataBinding.isValueTrue(!(checkFileType()))) {
		JsonDataBinding.AbortEvent = true;
	return;

	}
	JsonDataBinding.PageValues.sizeOK=HtmlFileUpload1.jsData.IsFileSizeValid(true);
	if(JsonDataBinding.isValueTrue(!(JsonDataBinding.PageValues.sizeOK))) {
		JsonDataBinding.AbortEvent = true;
	return;

	}
	var u98be2c28=new Object();
	u98be2c28.j25e2d7ec = HtmlFileBrowser1.jsData.getSelectedFolderFullPath();
	u98be2c28.nextBlock=function(){
						var u3c73b0ee=new Object();
						u3c73b0ee.j5a272b4e = JsonDataBinding.values.j5a272b4e;
						u3c73b0ee.j82f2ad72 = JsonDataBinding.values.j82f2ad72;
						u3c73b0ee.jb0dc6b14 = JsonDataBinding.values.jb0dc6b14;
						JsonDataBinding.executeServerMethod('sdddb3fa1',u3c73b0ee);

	}
	JsonDataBinding.executeServerMethod('sabf74fbd',u98be2c28,HtmlFileUpload1f);
	}
	var txtFile=document.getElementById('txtFile');
	txtFile.onchange=function(event,sender) {
	if(typeof sender === 'undefined' || sender == null) {
		var e = (typeof event !== 'undefined' && event != null)?event:(window.event || (document.parentWindow? document.parentWindow.event:null));
		var sender = JsonDataBinding.getSender(e);
	}
	JsonDataBinding.SetEventFirer(txtFile);
	JsonDataBinding.AbortEvent = false;
	JsonDataBinding.PageValues.propSelectedFile=document.getElementById('txtFile').value;
}
	var HtmlFileBrowser1=document.getElementById('HtmlFileBrowser1');
	HtmlFileBrowser1.onfileselected=function(event,sender) {
	if(typeof sender === 'undefined' || sender == null) {
		var e = (typeof event !== 'undefined' && event != null)?event:(window.event || (document.parentWindow? document.parentWindow.event:null));
		var sender = JsonDataBinding.getSender(e);
	}
	JsonDataBinding.SetEventFirer(HtmlFileBrowser1);
	JsonDataBinding.AbortEvent = false;
	setFileSelection(HtmlFileBrowser1.jsData.getSelectedFileFullPath());
}
	var btOK=document.getElementById('btOK');
	btOK.onclick=function(event) {
	if(typeof sender === 'undefined' || sender == null) {
		var e = (typeof event !== 'undefined' && event != null)?event:(window.event || (document.parentWindow? document.parentWindow.event:null));
		var sender = JsonDataBinding.getSender(e);
	}
	JsonDataBinding.SetEventFirer(btOK);
	JsonDataBinding.AbortEvent = false;
		JsonDataBinding.confirmDialog();
}
	var btCancel=document.getElementById('btCancel');
	btCancel.onclick=function(event) {
	if(typeof sender === 'undefined' || sender == null) {
		var e = (typeof event !== 'undefined' && event != null)?event:(window.event || (document.parentWindow? document.parentWindow.event:null));
		var sender = JsonDataBinding.getSender(e);
	}
	JsonDataBinding.SetEventFirer(btCancel);
	JsonDataBinding.AbortEvent = false;
		if(typeof JsonDataBinding != 'undefined') JsonDataBinding.pageMoveout = true;
	JsonDataBinding.closePage();
}

var HtmlFileUpload1 = document.getElementById('HtmlFileUpload1');
HtmlFileUpload1.jsData=JsonDataBinding.CreateFileUploader(HtmlFileUpload1);

JsonDataBinding.onPageInitialize();
}
function onclick_a6992b6b() {
	setFileSelection(JsonDataBinding.values.j5a272b4e);
	document.getElementById('HtmlFileBrowser1').jsData.resetCurrentFolder();
}
function onclick_c1c03d80() {
	if(JsonDataBinding.isValueTrue(!(JsonDataBinding.isValueTrue(JsonDataBinding.values.jb0dc6b14)))) {
		alert(JsonDataBinding.values.j82f2ad72);

	}
}
</script>
	</head>
	<body>
		<span id="lblTitle" tabindex="4" style="position: absolute; left:114px; top:57px; font-family:Microsoft Sans Serif; font-size:12pt; font-weight:bold; ">Web File Selection</span>
		<span id="lblcapSelect" tabindex="7" style="position: absolute; left:44px; top:144px; font-family:Microsoft Sans Serif; font-size:8.25pt; ">Select existing file from server: </span>
		<span id="lblcapFile" tabindex="5" style="position: absolute; left:54px; top:92px; font-family:Microsoft Sans Serif; font-size:8.25pt; ">Selected file:</span>
		<input id="txtFile" type="text" value="" tabindex="6" maxlength="32767" style="background-color:#ffffff; color:#000000; width:387px; height:20px; position: absolute; left:44px; top:108px; font-family:Microsoft Sans Serif; font-size:8.25pt; " />
		<form id="HtmlFileUpload1f" tabindex="8" action="WebFilePicker.php" method="post" enctype="multipart/form-data" style="width:295px; position: absolute; left:44px; top:371px; " target="ff989cbc2">
			<input type="hidden" id="clientRequest" name="clientRequest" /><input type="hidden" value="5242880" name="MAX_FILE_SIZE" />
			<input type="file" name="HtmlFileUpload1" id="HtmlFileUpload1" style="width:295px;" />
		</form>
		<iframe id="ff989cbc2" name="ff989cbc2" style="display:none;" src="" onload="JsonDataBinding.ProcessIFrame();"></iframe>
		<input id="btUpload" type="button" value="Upload" tabindex="2" style="white-space: normal;background-color:#f0f0f0; color:#000000; width:75px; height:23px; position: absolute; left:356px; top:371px; font-family:Microsoft Sans Serif; font-size:8.25pt; " />
		<div id="HtmlFileBrowser1" tabindex="8" style="border-style:none; width:387px; height:149px; position: absolute; left:44px; top:160px; font-family:Microsoft Sans Serif; font-size:8.25pt; "><br /></div>
		<span id="lblcapUpload" tabindex="9" style="position: absolute; left:44px; top:355px; font-family:Microsoft Sans Serif; font-size:8.25pt; ">Select existing file from your computer and upload it to server:</span>
		<input id="btOK" type="button" value="OK" tabindex="10" style="white-space: normal;background-color:#f0f0f0; color:#000000; width:136px; height:23px; position: absolute; left:44px; top:413px; font-family:Microsoft Sans Serif; font-size:8.25pt; " />
		<input id="btCancel" type="button" value="Cancel" tabindex="11" style="white-space: normal;background-color:#f0f0f0; color:#000000; width:144px; height:23px; position: absolute; left:195px; top:413px; font-family:Microsoft Sans Serif; font-size:8.25pt; " />
	</body>
</html>